{"version":3,"sources":["logo.svg","components/FullView.jsx","components/Treemap.jsx","components/YearComparison.jsx","components/PercentageChangeList.jsx","components/DataView.jsx","App.jsx","reportWebVitals.js","index.jsx"],"names":["FullView","styled","div","_templateObject","_taggedTemplateLiteral","Treemap","_ref","data","isLoading","padding","gutter","filters","setFilters","hierarchyBy","setCurrentSum","sum","fullValue","index","isMultipleMaxSum","sumWindows","observe","unobserve","width","height","entry","useDimensions","onResize","_ref2","w","h","entr","svgRef","useRef","setSum","useState","displayMode","setDisplayMode","colorScale","useMemo","d3","domain","range","clamp","getNodeColor","useCallback","node","lastYear","AMOUNT_LASTYEAR","GROWTH","nestedData","console","log","out","nest","i","key","d","inData","values","rollup","leaves","value","l","AMOUNT","entries","_inData","_inData$values","_inData$values$filter","filter","call","growth","setGrowth","useEffect","s","reduce","a","b","_b$value","undefined","lastYearSum","_b$value2","g","current","svgHeight","clientHeight","root","_d$value","sort","_a$value","_b$value3","valA","each","newSum","_b$value4","newSumWin","idx0","indexOf","fullVal","treeFullArea","treeAspect","treeCurrentArea","treeH","Math","sqrt","treeW","svg","size","treemap","select","treemapPieceGroup","selectAll","_d$data","treemapPieceGroupEnter","enter","append","attr","_d$data2","concat","replaceAll","style","_d$data3","_d$data4","_d$value2","_d$value2$toLocaleStr","itemGrowth","growthText","toFixed","lastYearText","toLocaleString","x0","y0","x1","y1","_d$data5","treemapPieceMerged","merge","on","e","el","_d$data6","newFilters","length","newSumWindows","idx","newFullValue","newArea","newH","newW","dx","dy","sx","sy","this","classed","transition","duration","p","max","setTimeout","_d$data7","_d$value3","_d$value3$toLocaleStr","nodeGrowth","text","_d$data8","exit","delay","remove","ReactTooltip","rebuild","_jsxs","position","top","left","right","bottom","display","flexDirection","overflowY","children","paddingLeft","fontSize","marginBottom","zIndex","_jsx","whiteSpace","opacity","color","marginLeft","backgroundColor","alignItems","justifyContent","background","pointerEvents","flexGrow","ref","transform","className","marginTop","Container","Title","h3","_templateObject2","ChartContainer","_templateObject3","BarSlot","_templateObject4","Bar","_templateObject5","BarLabel","_templateObject6","BarValue","_templateObject7","YearComparison","scopeTitle","yearData","filtered","activeFilters","slice","filterLevel","filterValue","years","forEach","_d$AMOUNT_","_d$AMOUNT_2","amount69","parseFloat","AMOUNT_69","replace","amount68","AMOUNT_68","Object","map","year","amount","parseInt","maxAmount","title","substring","flex","minHeight","ListItem","Name","span","PercentChange","props","PercentageChangeList","changeData","levelToCompare","min","compareField","groups","Map","groupKey","has","set","group","get","Array","from","name","isNew","diff","maxHeight","item","fontStyle","RightSidebar","ResponsiveImage","img","CreditLink","THAI_NAME","MINISTRY","BUDGETARY_UNIT","BUDGET_PLAN","OUTPUT_PROJECT","ITEM","DataView","searchQuery","setSearchQuery","filterDataByQuery","datum","query","searchLevels","includes","filteredData","location","useLocation","useHistory","f","pathname","split","paddingRight","overflowX","x","_Fragment","type","onClick","navigateTo","temp","splice","marginRight","border","textAlign","textDecoration","substr","onChange","target","placeholder","href","src","process","alt","PageContainer","button","App","setData","setLoading","isCompareView","setCompareView","setSumWindows","then","setSumWindowsIdx","maxSumValue","mx","preprocessedData","amountThisYear","amountLastYear","_objectSpread","DIFF","Infinity","OUTPUT","PROJECT","trim","ITEM_DESCRIPTION","CATEGORY_LV2","CATEGORY_LV3","CATEGORY_LV4","CATEGORY_LV5","CATEGORY_LV6","join","multiline","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode","Router","document","getElementById"],"mappings":"wQAAe,I,sBCaAA,MAVEC,IAAOC,IAAGC,MAAAC,YAAA,gI,OC8dZC,I,cAAAA,EA9cf,SAAgBC,GAaZ,IAba,KACfC,EAAO,GAAE,UACTC,GAAY,EAAI,QAChBC,EAAU,GAAE,OACZC,EAAS,EAAC,QACVC,EAAU,CAAC,OAAM,WACjBC,EAAaA,OAAS,YACtBC,EAAc,GAAE,cAChBC,EAAiBC,MAAW,UAC5BC,GAAY,EAAE,MACdC,EAAQ,EAAC,iBACTC,GAAmB,EAAK,WACxBC,EAAa,IACdb,EACC,MAAM,QACJc,EAAO,UAAEC,EAAS,MAAEC,EAAK,OAAEC,EAAM,MAAEC,GACjCC,YAAc,CAChBC,SAAUC,IAGH,IAHI,QAETP,EAAO,UAAEC,EAAS,EAAEO,EAAC,EAAEC,EAAC,KAAEC,GAC3BH,EACCN,IACAD,OAMEW,EAASC,iBAAO,OAGfjB,EAAKkB,GAAUC,oBAAU,IACzBC,EAAaC,GAAkBF,mBAAS,WAEzCG,EAAaC,kBAAQ,IAAMC,MAC9BC,OAAO,EAAE,GAAK,EAAG,KACjBC,MAAM,CAAC,YAAa,UAAW,cAC/BC,OAAM,GAAO,IAEVC,EAAeC,sBAAaC,IAEhC,MAAMC,EAAe,OAAJD,QAAI,IAAJA,OAAI,EAAJA,EAAME,gBACvB,OAAgB,MAAZD,GAAiC,IAAbA,EACf,YAGc,OAAZ,OAAJD,QAAI,IAAJA,OAAI,EAAJA,EAAMG,QAAiBX,EAAWQ,EAAKG,QAAU,WACvD,CAACX,IAEEY,EAAaX,kBAAQ,KACzBY,QAAQC,IAAI,UAAWxC,GAEvB,IAAIyC,EAAMC,cAEV,IAAK,MAAMC,KAAK3C,EAGdyC,EAAMA,EAAIG,IAAKC,GAAMA,EAAE3C,EAAYyC,KAYrC,IAAIG,EAAS,CACXF,IAAK,OACLG,OAAQ,CAAC,CAAEH,IAAK,MAAOG,OAXVN,EACZO,OAAQC,IAAM,CACbC,MAAOtB,IAAOqB,EAASE,GAAMA,EAAEC,QAC/BhB,gBAAiBR,IAAOqB,EAASE,GAAMA,EAAEf,iBACzCC,OAAQT,IAAOqB,EAASE,GAAMA,EAAEf,iBAAmB,EAC9CR,IAAOqB,EAASE,GAAMA,EAAEC,QAAUxB,IAAOqB,EAASE,GAAMA,EAAEf,iBAAoB,EAC/E,QAELiB,QAAQzD,MAOX,IAAK,MAAM+C,KAAK3C,EAAS,CAAC,IAADsD,EAAAC,EAAAC,EACvBV,EAAe,QAATQ,EAAGR,SAAM,IAAAQ,GAAQ,QAARC,EAAND,EAAQP,cAAM,IAAAQ,GAAQ,QAARC,EAAdD,EAAgBE,cAAM,IAAAD,OAAhB,EAANA,EAAAE,KAAAH,EAA0BV,GAAMA,EAAED,MAAQ5C,EAAQ2C,IAAI,EACjE,CAIA,OAFAJ,QAAQC,IAAI,SAAUM,GAEfA,GACN,CAAClD,EAAMI,EAASE,KAEZyD,EAAQC,GAAarC,mBAAS,MAuRrC,OArRAsC,oBAAU,KACR,MAAMC,EAAIxB,EAAWS,OAAOgB,OAAO,CAACC,EAAGC,KAAO,IAADC,EAE3C,OAAOF,QADwBG,KAAZ,QAAPD,EAAAD,EAAEf,aAAK,IAAAgB,OAAA,EAAPA,EAAShB,OAAsBe,EAAEf,MAAMA,MAASe,EAAEf,OAAS,IAEtE,GACGkB,EAAc9B,EAAWS,OAAOgB,OAAO,CAACC,EAAGC,KAAC,IAAAI,EAAA,OAAKL,IAAY,QAAPK,EAAAJ,EAAEf,aAAK,IAAAmB,OAAA,EAAPA,EAASjC,kBAAmB,IAAI,GACtFkC,EAAIF,EAAc,EAAKN,EAAIM,EAAe,EAAI,KACpD7B,QAAQC,IAAI,MAAOsB,EAAG,WAAYM,EAAa,SAAUE,GACrDlE,IAAQ0D,GAAK3D,EAAc2D,GAC/BxC,EAAOwC,GACPF,EAAUU,IACT,CAAChC,EAAYnC,EAAeC,IAE/ByD,oBAAU,KACR,IAAKzC,EAAOmD,QAAS,OAErBhC,QAAQC,IAAI,UAAWnC,GACvBkC,QAAQC,IAAI,SAAUF,GACtB,MAAMkC,EAAYpD,EAAOmD,QAAQE,aACjClC,QAAQC,IAAIgC,GAEZ,MAAME,EAAO9C,IAAaU,EAAaO,GAAO,OAADA,QAAC,IAADA,OAAC,EAADA,EAAGE,QAC7C3C,IAAKyC,IAAC,IAAA8B,EAAA,YAA0BR,KAAnB,OAADtB,QAAC,IAADA,GAAQ,QAAP8B,EAAD9B,EAAGK,aAAK,IAAAyB,OAAP,EAADA,EAAUzB,OAAsBL,EAAEK,MAAMA,OAAU,OAADL,QAAC,IAADA,OAAC,EAADA,EAAGK,QAAS,IACzE0B,KAAK,CAACZ,EAAGC,KAAO,IAADY,EAAAC,EACd,MAAMC,OAA2BZ,KAAnB,OAADH,QAAC,IAADA,GAAQ,QAAPa,EAADb,EAAGd,aAAK,IAAA2B,OAAP,EAADA,EAAU3B,OAAsBc,EAAEd,MAAMA,OAAU,OAADc,QAAC,IAADA,OAAC,EAADA,EAAGd,QAAS,EAE1E,YADiCiB,KAAnB,OAADF,QAAC,IAADA,GAAQ,QAAPa,EAADb,EAAGf,aAAK,IAAA4B,OAAP,EAADA,EAAU5B,OAAsBe,EAAEf,MAAMA,OAAU,OAADe,QAAC,IAADA,OAAC,EAADA,EAAGf,QAAS,GAC5D6B,IAGfC,KAAMnC,IACDA,EAAEjD,KAAKsD,QAETL,EAAET,gBAAkBS,EAAEjD,KAAKsD,MAAMd,gBAEjCS,EAAER,OAASQ,EAAEjD,KAAKsD,MAAMb,UAIxB4C,EAAS3C,EAAWS,OAAOgB,OAAO,CAACC,EAAGC,KAAO,IAADiB,EAEhD,OAAOlB,QADwBG,KAAZ,QAAPe,EAAAjB,EAAEf,aAAK,IAAAgC,OAAA,EAAPA,EAAShC,OAAsBe,EAAEf,MAAMA,MAASe,EAAEf,OAAS,IAEtE,GAEGiC,EAAY,IAAI3E,GAChB4E,EAAOD,EAAUE,QAAQjF,IACjB,IAAVgF,IACFD,EAAUC,GAAQH,GAEpB,MAAMK,EAAU1D,IAAOuD,GACjBI,GAAgB5E,EAAQ,EAAIb,IAAY0E,EAAY,EAAI1E,GACxD0F,GAAc7E,EAAQ,EAAIb,IAAY0E,EAAY,EAAI1E,GACtD2F,EAAmBR,GAAUK,GAAW,GAAMC,EACpDhD,QAAQC,IAAI,OAAQlC,EAAOE,EAAY2E,EAAW/E,EAAKkF,EAASL,GAChE,MAAMS,EAAQJ,GAAW,EAAId,EAAY,EAAI1E,EAAU6F,KAAKC,KAAKH,EAAkBD,GAC7EK,EAAQP,GAAW,EAAI3E,EAAQ,EAAIb,EAAU2F,EAAkBC,EAS/DI,GAPUlE,MACbmE,KAAK,CAACF,EAAOH,IACb5F,QAAQ,EAGGkG,CAAQtB,GAEV9C,IAAUR,EAAOmD,SAAS0B,OAAO,YAMvCC,GAJWtE,MACdC,OAAO,CAAC,EAAGD,IAAO8C,EAAKzB,SAAWJ,GAAMA,EAAEK,SAC1CpB,MAAM,CAAC,EAAGnB,EAAQ,EAAIb,IAECgG,EACvBK,UAAU,mBACVvG,KAAK8E,EAAKzB,SAAWJ,IAAC,IAAAuD,EAAA,OAAM,OAADvD,QAAC,IAADA,GAAO,QAANuD,EAADvD,EAAGjD,YAAI,IAAAwG,OAAN,EAADA,EAASxD,OAEjCyD,EAAyBH,EAC5BI,QACAC,OAAO,KACPC,KAAK,QAAS,iBACdA,KAAK,KAAO3D,IAAC,IAAA4D,EAAA,SAAAC,OAAS,OAAD7D,QAAC,IAADA,GAAO,QAAN4D,EAAD5D,EAAGjD,YAAI,IAAA6G,OAAN,EAADA,EAAS7D,IAAI+D,WAAW,SAAU,IAAG,KAAAD,OAAIpG,KAC9DsG,MAAM,OAAS/D,IAAC,IAAAgE,EAAA,mBAAAH,OAAmB,OAAD7D,QAAC,IAADA,GAAO,QAANgE,EAADhE,EAAGjD,YAAI,IAAAiH,OAAN,EAADA,EAASjE,IAAI+D,WAAW,SAAU,IAAG,KAAAD,OAAIpG,EAAK,OAChFkG,KAAK,WAAa3D,IAAO,IAADiE,EAAAC,EAAAC,EACvB,MAAMC,EAAc,OAADpE,QAAC,IAADA,OAAC,EAADA,EAAGR,OAChBF,EAAY,OAADU,QAAC,IAADA,OAAC,EAADA,EAAGT,gBACd8E,EAA2B,MAAdD,EAAkB,GAAAP,QAAoB,IAAbO,GAAkBE,QAAQ,GAAE,KAAM,MACxEC,EAA2B,MAAZjF,EAAmBA,EAASkF,iBAAmB,MACpE,MAAM,GAANX,OAAW,OAAD7D,QAAC,IAADA,GAAO,QAANiE,EAADjE,EAAGjD,YAAI,IAAAkH,OAAN,EAADA,EAASlE,IAAG,QAAA8D,OAAQ,OAAD7D,QAAC,IAADA,GAAQ,QAAPkE,EAADlE,EAAGK,aAAK,IAAA6D,GAAgB,QAAhBC,EAARD,EAAUM,sBAAc,IAAAL,OAAvB,EAADA,EAAAtD,KAAAqD,GAA4B,mFAAAL,OAAsBU,EAAY,iEAAAV,OAAmBQ,KAE/GV,KAAK,YAAc3D,GAAC,aAAA6D,OAAkB7D,EAAEyE,IAAM,EAAC,KAAAZ,OAAI7D,EAAE0E,IAAM,EAAC,MAG/DlB,EACGE,OAAO,QACPC,KAAK,QAAS,OACdA,KAAK,KAAM,GACXI,MAAM,OAAS/D,GAAMb,EAAaa,IAClC2D,KAAK,QAAU3D,GAAOA,EAAE2E,GAAK3E,EAAEyE,IAAO,GACtCd,KAAK,SAAW3D,GAAOA,EAAE4E,GAAK5E,EAAE0E,IAAO,GAO1ClB,EACGE,OAAO,QACPC,KAAK,KAAO3D,IAAC,IAAA6E,EAAA,cAAAhB,OAAc,OAAD7D,QAAC,IAADA,GAAO,QAAN6E,EAAD7E,EAAGjD,YAAI,IAAA8H,OAAN,EAADA,EAAS9E,IAAI+D,WAAW,SAAU,IAAG,KAAAD,OAAIpG,KACnEiG,OAAO,QACPC,KAAK,QAAS,QACdA,KAAK,KAAM,GACXI,MAAM,OAAQ,SACdJ,KAAK,QAAU3D,GAAOA,EAAE2E,GAAK3E,EAAEyE,IAAO,GACtCd,KAAK,SAAW3D,GAAOA,EAAE4E,GAAK5E,EAAE0E,IAAO,GAE1ClB,EACGE,OAAO,QACPC,KAAK,QAAS,aACdA,KAAK,YAAa,QAClBA,KAAK,OAAQ,SAEhBH,EACGE,OAAO,QACPC,KAAK,QAAS,cACdA,KAAK,YAAa,QAClBA,KAAK,OAAQ,SAEhBH,EACGE,OAAO,QACPC,KAAK,QAAS,eACdA,KAAK,YAAa,QAClBA,KAAK,OAAQ,SAEhB,MAAMmB,EAAqBtB,EAAuBuB,MAAM1B,GAExDyB,EACGE,GAAG,QAAS,MACZA,GAAG,QAAS,CAACC,EAAGjF,EAAGkF,KAAQ,IAADC,EACzB,MAAMC,EAAa,IAAIjI,EAAU,OAAD6C,QAAC,IAADA,GAAO,QAANmF,EAADnF,EAAGjD,YAAI,IAAAoI,OAAN,EAADA,EAASpF,KACzC,GAAIqF,EAAWC,OAAShI,EAAYgI,OAAQ,OAK5C,MAAMC,EAAgB,IAAI3H,GACpB4H,EAAMD,EAAc9C,QAAQjF,IACrB,IAATgI,IACFD,EAAcC,GAAOvF,EAAEK,OAEzB,MAAMmF,EAAezG,IAAOuG,GAItBG,EAAWzF,EAAEK,OAASmF,GAAgB,GAAM9C,EAC5CgD,EAAO5C,KAAKC,KAAK0C,EAAU9C,GAC3BgD,EAAOF,EAAUC,EAEjBE,EAAK5F,EAAEyE,GACPoB,EAAK7F,EAAE0E,GACPoB,EAAKH,GAAQ3F,EAAE2E,GAAK3E,EAAEyE,IACtBsB,EAAKL,GAAQ1F,EAAE4E,GAAK5E,EAAE0E,IAE5BhF,QAAQC,IAAI,MAAOZ,IAAUiH,MAAOf,EAAGjF,EAAGkF,GAI1CnG,IAAUiH,MAAMC,QAAQ,YAAY,GAEpCnB,EACGoB,aACAC,SAAS,KACTxC,KAAK,YAAcyC,GAAC,aAAAvC,QAAmBuC,EAAE3B,GAAKmB,GAAME,EAAE,KAAAjC,QAAKuC,EAAE1B,GAAKmB,GAAME,EAAE,MAE7EjB,EAAmB1B,OAAO,YACvB8C,aACAC,SAAS,KACTxC,KAAK,QAAUyC,GAAMtD,KAAKuD,IAAIP,GAAMM,EAAEzB,GAAKyB,EAAE3B,IAAK,IAClDd,KAAK,SAAWyC,GAAMtD,KAAKuD,IAAIN,GAAMK,EAAExB,GAAKwB,EAAE1B,IAAK,IAEtDI,EAAmB1B,OAAO,aACvB8C,aACAC,SAAS,KACTxC,KAAK,QAAUyC,GAAMtD,KAAKuD,IAAIP,GAAMM,EAAEzB,GAAKyB,EAAE3B,IAAK,IAClDd,KAAK,SAAWyC,GAAMtD,KAAKuD,IAAIN,GAAMK,EAAExB,GAAKwB,EAAE1B,IAAK,IAEtD4B,WAAW,KACTlJ,EAAWgI,IAEV,OAEJc,aACAC,SAAS,KACTxC,KAAK,YAAc3D,GAAC,aAAA6D,OAAkB7D,EAAEyE,GAAE,KAAAZ,OAAI7D,EAAE0E,GAAE,MAClDf,KAAK,UAAW,GAChBA,KAAK,WAAa3D,IAAO,IAADuG,EAAAC,EAAAC,EACvB,MAAMC,EAAc,OAAD1G,QAAC,IAADA,OAAC,EAADA,EAAGR,OAChBF,EAAY,OAADU,QAAC,IAADA,OAAC,EAADA,EAAGT,gBACd8E,EAA2B,MAAdqC,EAAkB,GAAA7C,QAAoB,IAAb6C,GAAkBpC,QAAQ,GAAE,KAAM,MACxEC,EAA2B,MAAZjF,EAAmBA,EAASkF,iBAAmB,MACpE,MAAM,GAANX,OAAW,OAAD7D,QAAC,IAADA,GAAO,QAANuG,EAADvG,EAAGjD,YAAI,IAAAwJ,OAAN,EAADA,EAASxG,IAAG,QAAA8D,OAAQ,OAAD7D,QAAC,IAADA,GAAQ,QAAPwG,EAADxG,EAAGK,aAAK,IAAAmG,GAAgB,QAAhBC,EAARD,EAAUhC,sBAAc,IAAAiC,OAAvB,EAADA,EAAA5F,KAAA2F,GAA4B,mFAAA3C,OAAsBU,EAAY,iEAAAV,OAAmBQ,KAGlHS,EAAmB1B,OAAO,YACvB8C,aACAC,SAAS,KACTxC,KAAK,KAAM,GACXI,MAAM,OAAS/D,GAAMb,EAAaa,IAClC2D,KAAK,SAAU,SACfA,KAAK,eAAgBzG,GACrByG,KAAK,QAAU3D,GAAM8C,KAAKuD,IAAKrG,EAAE2E,GAAK3E,EAAEyE,IAAO,EAAG,IAClDd,KAAK,SAAW3D,GAAM8C,KAAKuD,IAAKrG,EAAE4E,GAAK5E,EAAE0E,IAAO,EAAG,IAEtDI,EAAmB1B,OAAO,aACvB8C,aACAC,SAAS,KACTxC,KAAK,KAAM,GACXI,MAAM,OAAQ,SACdJ,KAAK,QAAU3D,GAAM8C,KAAKuD,IAAKrG,EAAE2E,GAAK3E,EAAEyE,IAAO,EAAG,IAClDd,KAAK,SAAW3D,GAAM8C,KAAKuD,IAAKrG,EAAE4E,GAAK5E,EAAE0E,IAAO,EAAG,IAEtDI,EAAmB1B,OAAO,kBACvBO,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,oBAAqB,WAC1BgD,KAAM3G,IAAC,IAAA4G,EAAA,OAAM,OAAD5G,QAAC,IAADA,GAAO,QAAN4G,EAAD5G,EAAGjD,YAAI,IAAA6J,OAAN,EAADA,EAAS7G,MAExB+E,EAAmB1B,OAAO,mBACvBO,KAAK,IAAK,GACVA,KAAK,IAAK,IACVA,KAAK,eAAgB,IACrBA,KAAK,oBAAqB,WAC1BA,KAAK,UAAW,GAChBgD,KAAM3G,GAAC,GAAA6D,OAAQ7D,EAAEK,MAAMmE,iBAAgB,wBAE1CM,EAAmB1B,OAAO,oBACvBO,KAAK,IAAK,GACVA,KAAK,IAAK,IACVA,KAAK,eAAgB,IACrBA,KAAK,oBAAqB,WAC1BA,KAAK,UAAW,GAChBgD,KAAM3G,IACL,MAAMoE,EAAc,OAADpE,QAAC,IAADA,OAAC,EAADA,EAAGR,OACtB,OAAqB,MAAd4E,EAAkB,GAAAP,OAAMO,GAAc,EAAI,yDAAc,2BAAM,KAAAP,QAAkB,IAAbO,GAAkBE,QAAQ,GAAE,KAAM,KAE7GX,KAAK,OAAS3D,IAAQ,OAADA,QAAC,IAADA,OAAC,EAADA,EAAGR,QAAS,EAAI,QAAU,OAADQ,QAAC,IAADA,OAAC,EAADA,EAAGR,QAAS,EAAI,OAAS,SAE1E6D,EAAkBwD,OACfX,aACAY,MAAM,KACNX,SAAS,KACTxC,KAAK,UAAW,GAEhBoD,SAEHC,IAAaC,UACbvH,QAAQC,IAAI,sBAEZD,QAAQC,IAAI,YAAakC,EAAKzB,SAASQ,OAAQZ,IAAOA,EAAE2E,GAAK3E,EAAEyE,KAAOzE,EAAE4E,GAAK5E,EAAE0E,IAAM,MACrFhF,QAAQC,IAAI,aAAckC,EAAKzB,SAASQ,OAAQZ,GAAMA,EAAE2E,GAAK3E,EAAEyE,GAAK,KACpE/E,QAAQC,IAAI,YAAakC,EAAKzB,SAASQ,OAAQZ,GAAMA,EAAE4E,GAAK5E,EAAE0E,GAAK,MAClE,CACDnG,EACAkB,EACAtC,EACAW,EACAC,EACAY,EACA1B,EACAC,EACAG,EACAD,EACAI,EACAD,EACAE,EACAC,EACAC,EACAkB,EACAM,IAIA+H,eAAA,OACEnD,MAAO,CACLoD,SAAU,WACVC,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,EACRC,QAAS,OACTC,cAAe,SACfC,UAAW,QACXC,SAAA,CAEFT,eAAA,OACEnD,MAAO,CACL6D,YAAa,GACbC,SAAU,GACVC,aAAyB,EAAV7K,EACf8K,OAAQ,GACRJ,SAAA,CAEFK,cAAA,KAAGjE,MAAO,CAAEkE,WAAY,UAAWN,SACA,QAAhCxK,EAAQA,EAAQkI,OAAS,GAAe,uFAAmBlI,EAAQA,EAAQkI,OAAS,KAEvF2C,cAAA,SACAd,eAAA,QAAMnD,MAAO,CAAEmE,QAAS,IAAMP,SAAA,CAC3BpK,EAAIiH,iBACJ,IAAI,qBAEM,MAAV1D,GACCoG,eAAA,QACEnD,MAAO,CACLoE,MAAOrH,EAAS,EAAI,OAASA,EAAS,EAAI,OAAS,UACnDsH,WAAY,OACZT,SAAA,CAED,KACU,IAAT7G,GAAcwD,QAAQ,GACvB,cAKRtH,GAEGgL,cAACxL,EAAQ,CACPuH,MAAO,CACLsE,gBAAiB,QACjBC,WAAY,SACZC,eAAgB,UAChBZ,SACH,eAKLK,cAAA,OACEjE,MAAO,CACLhG,OAAQd,EACR6K,cAAe7K,EACfuL,WAAY,gCACZ1K,MAAO,OACPiK,OAAQ,EACRU,cAAe,UAGnBT,cAAA,OAAKjE,MAAO,CAAE2E,SAAU,EAAGvB,SAAU,YAAaQ,SAChDK,cAAA,OACEjE,MAAO,CACLoD,SAAU,WACVC,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,EACRC,QAAS,OACTC,cAAe,SACfC,UAAW,QAEbiB,IAAK/K,EAAQ+J,SAEbK,cAAA,OAAKW,IAAKpK,EAAQT,MAAOA,EAAOC,OAAQA,EAAO4J,SAC7CK,cAAA,KAAGY,UAAS,aAAA/E,OAAe5G,EAAO,MAAA4G,OAAK5G,EAAO,KAAK4L,UAAU,gBAInEb,cAAA,OACEjE,MAAO,CACLhG,OAAQd,EACR6L,WAAY7L,EACZuL,WAAY,gCACZ1K,MAAO,OACPiK,OAAQ,EACRU,cAAe,YAKzB,EC3dA,MAAMM,EAAYtM,IAAOC,IAAGC,MAAAC,YAAA,8JAUtBoM,EAAQvM,IAAOwM,GAAEC,MAAAtM,YAAA,iGAOjBuM,EAAiB1M,IAAOC,IAAG0M,MAAAxM,YAAA,6GAQ3ByM,EAAU5M,IAAOC,IAAG4M,MAAA1M,YAAA,wFAOpB2M,EAAM9M,IAAOC,IAAG8M,MAAA5M,YAAA,6TAiBhB6M,EAAWhN,IAAOC,IAAGgN,MAAA9M,YAAA,yEAMrB+M,EAAWlN,IAAOC,IAAGkN,MAAAhN,YAAA,+DA4GZiN,I,UAAAA,EAtGf,SAAuB/M,GAAkC,IAAjC,KAAEC,EAAI,QAAEI,EAAO,YAAEE,GAAaP,EAEpD,MAAMgN,EAAahL,kBAAQ,IACpB3B,GAA8B,IAAnBA,EAAQkI,OACD,IAAnBlI,EAAQkI,QAA+B,QAAflI,EAAQ,GAAqB,6FAElDA,EAAQA,EAAQkI,OAAS,GAHa,qEAI5C,CAAClI,IAEE4M,EAAWjL,kBAAQ,KACvB,IAAK/B,GAAwB,IAAhBA,EAAKsI,SAAiBlI,GAA8B,IAAnBA,EAAQkI,OACpD,MAAO,GAIT,IAAI2E,EAAWjN,EACf,MAAMkN,EAA+B,QAAf9M,EAAQ,GAAeA,EAAQ+M,MAAM,GAAK/M,EAGhE,IAAK,IAAI2C,EAAI,EAAGA,EAAImK,EAAc5E,OAAQvF,IAAK,CAC7C,MAAMqK,EAAc9M,EAAYyC,GAC1BsK,EAAcH,EAAcnK,GAClCkK,EAAWA,EAASpJ,OAAQZ,GAAMA,EAAEmK,KAAiBC,EACvD,CAGA,MAAMC,EAAQ,CAAC,EAcf,OAZAL,EAASM,QAAStK,IAAO,IAADuK,EAAAC,EAEtB,MAAMC,EAAWC,YAAsB,QAAXH,EAAAvK,EAAE2K,iBAAS,IAAAJ,OAAA,EAAXA,EAAaK,QAAQ,KAAM,MAAO,MAAQ,EACjEP,EAAM,QAASA,EAAM,MAAU,GACpCA,EAAM,OAAWI,EAGjB,MAAMI,EAAWH,YAAsB,QAAXF,EAAAxK,EAAE8K,iBAAS,IAAAN,OAAA,EAAXA,EAAaI,QAAQ,KAAM,MAAO,MAAQ,EACjEP,EAAM,QAASA,EAAM,MAAU,GACpCA,EAAM,OAAWQ,IAGZE,OAAOvK,QAAQ6J,GACnBW,IAAI7M,IAAA,IAAE8M,EAAMC,GAAO/M,EAAA,MAAM,CAAE8M,OAAMC,YACjCnJ,KAAK,CAACZ,EAAGC,IAAM+J,SAAShK,EAAE8J,KAAM,IAAME,SAAS/J,EAAE6J,KAAM,MACzD,CAAClO,EAAMI,EAASE,IAEb+N,EAAYtM,kBAChB,IAAMC,IAAOgL,EAAW/J,GAAMA,EAAEkL,SAAW,EAC3C,CAACnB,IAGH,OAAwB,IAApBA,EAAS1E,OAET6B,eAAC6B,EAAS,CAAApB,SAAA,CACRK,cAACgB,EAAK,CAAArB,SAAC,uEACPK,cAAA,OAAKjE,MAAO,CAAEmE,QAAS,IAAMP,SAAC,0EAMlCT,eAAC6B,EAAS,CAAApB,SAAA,CACRK,cAACgB,EAAK,CAACqC,MAAOvB,EAAWnC,SACtBmC,EAAWzE,OAAS,GAAE,GAAAxB,OAAMiG,EAAWwB,UAAU,EAAG,IAAG,OAAQxB,IAElE9B,cAACmB,EAAc,CAAAxB,SACZoC,EAASiB,IAAKhL,GACbkH,eAAA,OAEEnD,MAAO,CACLwH,KAAM,EACN/D,QAAS,OACTC,cAAe,SACfa,WAAY,UACZX,SAAA,CAEFK,cAACqB,EAAO,CAAA1B,SACNK,cAACuB,EAAG,CACFxF,MAAO,CAAEhG,OAAO,GAAD8F,OAAM7D,EAAEkL,OAASE,EAAa,IAAG,KAAKI,UAAW,OAChEH,MAAK,GAAAxH,OAAK7D,EAAEiL,KAAI,MAAApH,OAAK7D,EAAEkL,OAAO1G,kBAAmBmD,SAEjDK,cAAC2B,EAAQ,CAAAhC,SAAE3H,EAAEkL,OAAS,EAAC,GAAArH,QAAO7D,EAAEkL,OAAS,KAAK5G,QAAQ,GAAE,KAAM,UAGlE0D,cAACyB,EAAQ,CAAA9B,SAAE3H,EAAEiL,SAhBRjL,EAAEiL,SAoBbjD,cAAA,OAAKjE,MAAO,CAAE8D,SAAU,GAAIK,QAAS,IAAMP,SACxCoC,EAASiB,IAAKhL,GACbkH,eAAA,OAAAS,SAAA,CACG3H,EAAEiL,KACF,KACAjL,EAAEkL,OAAO1G,iBACT,IAAI,uBAJGxE,EAAEiL,WAWtB,EClKA,MAAMlC,EAAYtM,IAAOC,IAAGC,MAAAC,YAAA,+KAWtBoM,EAAQvM,IAAOwM,GAAEC,MAAAtM,YAAA,iGAOjB6O,EAAWhP,IAAOC,IAAG0M,MAAAxM,YAAA,mNAYrB8O,EAAOjP,IAAOkP,KAAIrC,MAAA1M,YAAA,qHAQlBgP,EAAgBnP,IAAOkP,KAAInC,MAAA5M,YAAA,sEAGrBiP,GACJA,EAAM/K,OAAS,IAAa,UAC5B+K,EAAM/K,OAAS,EAAU,UACzB+K,EAAM/K,QAAU,IAAa,UAC1B,WAgHIgL,I,MAAAA,EA5Gf,SAA6BhP,GAAkC,IAAjC,KAAEC,EAAI,QAAEI,EAAO,YAAEE,GAAaP,EAE1D,MAAMgN,EAAahL,kBAAQ,IACpB3B,GAA8B,IAAnBA,EAAQkI,OACD,IAAnBlI,EAAQkI,QAA+B,QAAflI,EAAQ,GAAqB,yIAEnD,yEAAN0G,OAAyB1G,EAAQA,EAAQkI,OAAS,IAHL,uEAI5C,CAAClI,IAEE4O,EAAajN,kBAAQ,KACzB,IAAK/B,GAAwB,IAAhBA,EAAKsI,SAAiBlI,GAA8B,IAAnBA,EAAQkI,OACpD,MAAO,GAGT,MAAM4E,EAA+B,QAAf9M,EAAQ,GAAeA,EAAQ+M,MAAM,GAAK/M,EAG1D6O,EAAiBlJ,KAAKmJ,IAAIhC,EAAc5E,OAAQhI,EAAYgI,OAAS,GACrE6G,EAAe7O,EAAY2O,GAGjC,IAAIhC,EAAWjN,EACf,IAAK,IAAI+C,EAAI,EAAGA,EAAImK,EAAc5E,OAAQvF,IAAK,CAC7C,MAAMqK,EAAc9M,EAAYyC,GAC1BsK,EAAcH,EAAcnK,GAClCkK,EAAWA,EAASpJ,OAAQZ,GAAMA,EAAEmK,KAAiBC,EACvD,CAGA,MAAM+B,EAAS,IAAIC,IAInBpC,EAASM,QAAStK,IAAO,IAADuK,EAAAC,EACtB,MAAM6B,EAAWrM,EAAEkM,GACbzB,EAAWC,YAAsB,QAAXH,EAAAvK,EAAE2K,iBAAS,IAAAJ,OAAA,EAAXA,EAAaK,QAAQ,KAAM,MAAO,MAAQ,EAChEC,EAAWH,YAAsB,QAAXF,EAAAxK,EAAE8K,iBAAS,IAAAN,OAAA,EAAXA,EAAaI,QAAQ,KAAM,MAAO,MAAQ,EAEjEuB,EAAOG,IAAID,IACdF,EAAOI,IAAIF,EAAU,CAAE5B,SAAU,EAAGI,SAAU,IAEhD,MAAM2B,EAAQL,EAAOM,IAAIJ,GACzBG,EAAM/B,UAAYA,EAClB+B,EAAM3B,UAAYA,IAwBpB,OApBgB6B,MAAMC,KAAKR,EAAO3L,WAC/BwK,IAAI7M,IAAqC,IAAnCyO,GAAM,SAAEnC,EAAQ,SAAEI,IAAW1M,EAGlC,MAAO,CACLyO,OACA9L,OAHa+J,EAAW,GAAKJ,EAAWI,GAAYA,EAAYJ,EAAW,EAAI,EAAI,EAInFoC,MALyB,IAAbhC,EAMZA,WACAJ,WACAqC,KAAMrC,EAAWI,KAGpB9I,KAAK,CAACZ,EAAGC,IAEJD,EAAE0L,QAAUzL,EAAEyL,OAAe,GAC5B1L,EAAE0L,OAASzL,EAAEyL,MAAc,EACzBzL,EAAEN,OAASK,EAAEL,SAIvB,CAAC/D,EAAMI,EAASE,IAEnB,OAA0B,IAAtB0O,EAAW1G,OAEX6B,eAAC6B,EAAS,CAAApB,SAAA,CACRK,cAACgB,EAAK,CAAArB,SAAC,yEACPK,cAAA,OAAKjE,MAAO,CAAEmE,QAAS,IAAMP,SAAC,0EAMlCT,eAAC6B,EAAS,CAAApB,SAAA,CACRK,cAACgB,EAAK,CAACqC,MAAOvB,EAAWnC,SACtBmC,EAAWzE,OAAS,GAAE,GAAAxB,OAAMiG,EAAWwB,UAAU,EAAG,IAAG,OAAQxB,IAElE9B,cAAA,OAAKjE,MAAO,CAAEgJ,UAAW,QAASrF,UAAW,QAASC,SACnDoE,EAAWf,IAAKgC,GACf9F,eAACuE,EAAQ,CAAA9D,SAAA,CACPK,cAAC0D,EAAI,CAACL,MAAO2B,EAAKJ,KAAKjF,SAAEqF,EAAKJ,KAAKvH,OAAS,GAAE,GAAAxB,OAAMmJ,EAAKJ,KAAKtB,UAAU,EAAG,IAAG,OAAQ0B,EAAKJ,OAC3F5E,cAAC4D,EAAa,CAAC9K,OAAQkM,EAAKlM,OAAO6G,SAChCqF,EAAKH,MAAQ,+DAAY,GAAAhJ,QAAqB,IAAdmJ,EAAKlM,QAAcwD,QAAQ,GAAE,SAHnD0I,EAAKJ,SAQxB5E,cAAA,OACEjE,MAAO,CACL+E,UAAW,GACXjB,SAAU,GACVK,QAAS,GACT+E,UAAW,UACXtF,SACH,4KAKP,EClJA,MAEMuF,EAAezQ,IAAOC,IAAGC,MAAAC,YAAA,2NAYzBuQ,EAAkB1Q,IAAO2Q,IAAGlE,MAAAtM,YAAA,0BAI5ByQ,EAAa5Q,IAAO0E,EAACiI,MAAAxM,YAAA,iVAoBvBuQ,GAKE9P,EAAc,CAClB,WACA,iBACA,cAGA,iBAEA,QASIiQ,EAAY,CAChBC,SAAU,2HACVC,eAAgB,qEAChBC,YAAa,uCACbC,eAAgB,kFAChBC,KAAM,wCA8KOC,I,eAAAA,GA3Kf,SAAiB9Q,GAQb,IARc,KAChBC,EAAI,UACJC,EAAS,cACTM,EAAiBC,MAAW,UAC5BC,GAAY,EAAE,MACdC,EAAQ,EAAC,iBACTC,GAAmB,EAAK,WACxBC,EAAa,IACdb,EACC,MAAO+Q,EAAaC,GAAkBpP,mBAAS,KACxCvB,EAASC,GAAcsB,mBAAS,CAAC,QAElCqP,EAAoB3O,sBAAY,CAAC4O,EAAOC,KAC5C,MAAMC,EAAe,CACnB,WACA,kBAGF,IAAK,MAAMpO,KAAKoO,EACd,GAAIF,EAAME,EAAapO,IAAIqO,SAASF,GAAU,OAAO,EAEvD,OAAO,GACN,IAEGG,EAAetP,kBACnB,IAAM/B,EAAK6D,OAAQZ,GAAM+N,EAAkB/N,EAAG6N,IAC9C,CAAC9Q,EAAMgR,EAAmBF,IAGtBQ,EAAWC,cAmBjB,OAlBgBC,cAEhBvN,oBAAU,KACR,MAAMwN,EAAIH,EAASI,SAASC,MAAM,KAAKxE,MAAM,GAC7CxK,QAAQC,IAAI,IAAK6O,EAAGA,EAAEnJ,OAAS,GAAKmJ,EAAE,GAAKA,EAAI,CAAC,QAChDpR,EAAWoR,EAAEnJ,OAAS,GAAKmJ,EAAE,GAAKA,EAAI,CAAC,SACtC,CAACH,IAaFnH,eAAC1K,EAAQ,CAAAmL,SAAA,CAMPT,eAAA,OACEnD,MAAO,CACLhG,OA7Ha,GA8HbyJ,QAAS,OACTc,WAAY,SACZV,YAAa,GACb+G,aAAc,GACd7G,aAAc,GACdH,SAAA,CAEFK,cAAA,OACEjE,MAAO,CACL2E,SAAU,EACVlB,QAAS,OACTc,WAAY,SACZsG,UAAW,QACXjH,SAKDxK,EAAQ6N,IAAI,CAAC6D,EAAG/O,IACfoH,eAAA4H,WAAA,CAAAnH,SAAA,CACET,eAAA,UACE6H,KAAK,SACLC,QAASA,IA1CJC,EAACJ,EAAG/O,KACrBJ,QAAQC,IAAIkP,EAAG/O,GACf,MAAMoP,EAAO,IAAI/R,GACjB+R,EAAKC,OAAOrP,EAAI,GAEhBJ,QAAQC,IAAI,OAAQuP,GACpB9R,EAAW8R,IAoCgBD,CAAWJ,EAAG/O,GAC7BiE,MAAO,CACLqL,YAAa,EACb/G,gBAAiB,cACjBgH,OAAQ,OACRlH,MAAO,QACPlL,QAAS,EACTqS,UAAW,QACX3H,SAAA,CAEFK,cAAA,SAAOjE,MAAO,CAAEmE,QAAS,MAAOD,WAAY,UAAWN,SAAE7H,EAAI,GAAKwN,EAAUjQ,EAAYyC,EAAI,MAC3FA,EAAI,GAAKkI,cAAA,SACVA,cAAA,QAAMjE,MAAO,CAAEwL,eAAgBzP,EAAI3C,EAAQkI,OAAS,EAAI,YAAc,OAAQ4C,WAAY,UAAWN,SAC5F,IAAN7H,EAEmB,KAAhB+N,EACI,6FAAiB,mLAAAhK,OACiBgK,EAAW,KAEjDgB,EAAExJ,OAAS,GAAKwJ,EAAC,GAAAhL,OAAMgL,EAAEW,OAAO,EAAG,IAAG,YAG7C1P,IAAM3C,EAAQkI,OAAS,GAEpB6B,eAAA4H,WAAA,CAAAnH,SAAA,CACEK,cAAA,SAAOjE,MAAO,CAAEoE,MAAO,QAASiH,YAAa,EAAGlH,QAAS,OAAQP,SAAC,MAGlET,eAAA,SAAOnD,MAAO,CAAEoE,MAAO,QAASiH,YAAa,EAAGlH,QAAS,OAAQP,SAAA,CAAC,6CAE/D,IACA2F,EAAUjQ,EAAYyC,UAI9BA,EAAI3C,EAAQkI,OAAS,GACjB2C,cAAA,QAAMjE,MAAO,CAAEoE,MAAO,QAASiH,YAAa,GAAIzH,SAAC,YAK5DT,eAAA,OAAAS,SAAA,CACEK,cAAA,SAAOjE,MAAO,CAAE8D,SAAU,GAAIK,QAAS,IAAMP,SAAC,WAC9CK,cAAA,SACAA,cAAA,SACE+G,KAAK,OACL1O,MAAOwN,EACP4B,SAAWxK,GAAM6I,EAAe7I,EAAEyK,OAAOrP,OACzCsP,YAAY,sIAGhB3H,cAACqF,EAAU,CAACqC,OAAO,SAASE,KAAK,sBAAqBjI,SAEpDK,cAACmF,EAAe,CACd0C,IAAG,GAAAhM,OAAKiM,gBAAsB,qBAC9BC,IAAI,uCACJ1E,MAAM,kCAIZnE,eAAA,OAAKnD,MAAO,CAAEyD,QAAS,OAAQC,cAAe,MAAOiB,SAAU,GAAIf,SAAA,CACjEK,cAAA,OAAKjE,MAAO,CACVoD,SAAU,WACVuB,SAAU,GACVf,SAEAK,cAACnL,EAAO,CACNE,KAAMqR,EACNpR,UAAWA,EACXG,QAASA,EACTE,YAAaA,EACbD,WAAYA,EACZE,cAAgBuR,IAEdvR,EAAcuR,IAEhBrR,UAAWA,EACXC,MAAOA,EACPC,iBAAkBA,EAClBC,WAAYA,MAGhBuJ,eAACgG,EAAY,CAAAvF,SAAA,CACXK,cAAC6B,EAAc,CAAC9M,KAAMqR,EAAcjR,QAASA,EAASE,YAAaA,IACnE2K,cAAC8D,EAAoB,CAAC/O,KAAMqR,EAAcjR,QAASA,EAASE,YAAaA,YAKnF,EC7OA,MAAM2S,GAAgBvT,IAAOC,IAAGC,QAAAC,YAAA,oJAU1BuQ,GAAkB1Q,IAAO2Q,IAAGlE,QAAAtM,YAAA,0BAI5ByQ,GAAa5Q,IAAO0E,EAACiI,QAAAxM,YAAA,2RAiBvBuQ,IAKY1Q,IAAOC,IAAG4M,QAAA1M,YAAA,ofAuBpByQ,GAAcF,IAMC1Q,IAAOwT,OAAMzG,QAAA5M,YAAA,yNAqMnBsT,OAzLf,WACE,MAAOnT,EAAMoT,GAAWzR,mBAAS,KAC1B1B,EAAWoT,GAAc1R,oBAAS,IAClC2R,EAAeC,GAAkB5R,oBAAS,IAC1CvB,EAASC,GAAcsB,mBAAS,CAAC,SACjCf,EAAY4S,GAAiB7R,mBAAS,CAAC,EAAG,IAEjDsC,oBAAU,KACRjC,IAAO,GAAD8E,OAAIiM,gBAAsB,yBAAwBU,KAAMxQ,IAG5DmQ,EAAQnQ,GACRoQ,GAAW,MAEZ,IAEH,MAAMK,EAAmBA,CAAC3Q,EAAGO,KAC3B,MAAM6O,EAAO,IAAIvR,GACjBuR,EAAKpP,GAAKO,EACVkQ,EAAcrB,IAGVwB,EAAc5R,kBAAQ,IAAMC,IAAOpB,GAAa,CAACA,IAEjDD,EAAmBoB,kBAAQ,KAC/B,MAAM6R,EAAK5R,IAAOpB,GAClB,OAAOA,EAAWiD,OAAQiO,GAAM8B,IAAO9B,GAAGxJ,OAAS,GAClD,CAAC1H,IAEEiT,EAAmB9R,kBAAQ,IAAM/B,EACpCiO,IAAKhL,IACJ,MAAM6Q,EAAiBnG,WAAW1K,EAAE2K,UAAUC,QAAQ,KAAM,MAAQ,EAC9DkG,EAAiBpG,WAAW1K,EAAE8K,UAAUF,QAAQ,KAAM,MAAQ,EAEpE,OAAAmG,wBAAA,GACK/Q,GAAC,IACJO,OAAQsQ,EACRtR,gBAAiBuR,EACjBE,KAAMH,EAAiBC,EACvBtR,OAAQsR,EAAiB,GAAKD,EAAiBC,GAAkBA,EAAiBG,IAClFvD,eAAiB1N,EAAEkR,QAAUlR,EAAEmR,QAAYnR,EAAEkR,OAASlR,EAAEmR,QAAW,4HACnE5D,SAAUvN,EAAEuN,SAAS3C,QAAQ,cAAe,IAAIwG,OAChDzD,KAAM,CACJ3N,EAAEqR,iBACFrR,EAAEsR,aACFtR,EAAEuR,aACFvR,EAAEwR,aACFxR,EAAEyR,aACFzR,EAAE0R,cAED9Q,OAAQiO,GAAMA,GACd8C,KAAK,WAER,CAAC5U,IAEDsR,EAAWC,cAkBjB,OAjBgBC,cAEhBvN,oBAAU,KACR,MAAMwN,EAAIH,EAASI,SAASC,MAAM,KAAKxE,MAAM,GAC7CxK,QAAQC,IAAI,IAAK6O,EAAGA,EAAEnJ,OAAS,GAAKmJ,EAAE,GAAKA,EAAI,CAAC,QAChDpR,EAAWoR,EAAEnJ,OAAS,GAAKmJ,EAAE,GAAKA,EAAI,CAAC,SACtC,CAACH,IAYFnH,eAAC1K,EAAQ,CAAAmL,SAAA,CACPT,eAAC8I,GAAa,CAAArI,SAAA,CACZK,cAAA,OAAKjE,MAAO,CACVoD,SAAU,WACVuB,SAAU,GACVf,SAEAK,cAAC4F,GAAQ,CACP7Q,KAAM6T,EACN5T,UAAWA,EACXQ,UAAWkT,EACXpT,cAAgB2D,IACdvB,QAAQC,IAAI,kBAAmBsB,GAC/BwP,EAAiB,EAAGxP,IAEtBvD,iBAAkBA,EAClBC,WAAYA,EACZF,MAAO,MAGV4S,GACCrI,cAAA,OAAKjE,MAAO,CACVoD,SAAU,WACVuB,SAAU,GACVf,SAEAK,cAAC4F,GAAQ,CACP7Q,KAAM6T,EACN5T,UAAWA,EACXQ,UAAWkT,EACXpT,cAAgB2D,IACdvB,QAAQC,IAAI,kBAAmBsB,GAC/BwP,EAAiB,EAAGxP,IAEtBvD,iBAAkBA,EAClBC,WAAYA,EACZF,MAAO,SAsEfuK,cAAChB,IAAY,CAAC4K,WAAS,MAG7B,EClQeC,OAdUC,IACnBA,GAAeA,aAAuBC,UACxC,8BAAqBvB,KAAK1T,IAEnB,IAFoB,OACzBkV,EAAM,OAAEC,EAAM,OAAEC,EAAM,OAAEC,EAAM,QAAEC,GACjCtV,EACCkV,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,MCEdO,IAASC,OACPtK,cAACuK,IAAMC,WAAU,CAAA7K,SACfK,cAACyK,IAAM,CAAA9K,SACLK,cAACkI,GAAG,QAIRwC,SAASC,eAAe,SAM1Bd,I","file":"static/js/main.7db3a038.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from 'react';\nimport styled from 'styled-components';\n\nconst FullView = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n`;\n\nexport default FullView;\n","import React, {\n  useCallback, useEffect, useMemo, useRef, useState,\n} from 'react';\n\nimport * as d3 from 'd3';\nimport { nest } from 'd3-collection';\nimport useDimensions from 'react-cool-dimensions';\nimport ReactTooltip from 'react-tooltip';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport FullView from './FullView';\n\nconst THAI_NAME = {\n  MINISTRY: 'กระทรวงหรือเทียบเท่า',\n  BUDGETARY_UNIT: 'หน่วยรับงบฯ',\n  BUDGET_PLAN: 'แผนงาน',\n  OUTPUT_PROJECT: 'ผลผลิต/โครงการ',\n  ITEM: 'รายการ',\n};\n\nfunction Treemap({\n  data = [],\n  isLoading = true,\n  padding = 16,\n  gutter = 4,\n  filters = ['all'],\n  setFilters = () => { },\n  hierarchyBy = [],\n  setCurrentSum = (sum) => { },\n  fullValue = -1,\n  index = 0,\n  isMultipleMaxSum = false,\n  sumWindows = [],\n}) {\n  const {\n    observe, unobserve, width, height, entry,\n  } = useDimensions({\n    onResize: ({\n      /* eslint-disable-next-line no-shadow */\n      observe, unobserve, w, h, entr,\n    }) => {\n      unobserve();\n      observe();\n    },\n  });\n\n  // const history = useHistory();\n\n  const svgRef = useRef(null);\n\n  // const [data, setData] = useState([]);\n  const [sum, setSum] = useState(-1); // or 'bar'\n  const [displayMode, setDisplayMode] = useState('treemap'); // or 'bar'\n\n  const colorScale = useMemo(() => d3.scaleLinear()\n    .domain([-0.5, 0, 0.5]) // -50% to +50% growth\n    .range(['#cf0000ff', '#333333', '#00ac00ff'])\n    .clamp(true), []);\n\n  const getNodeColor = useCallback((node) => {\n    // New items (only in 2026, no amount in 2025) get the greenest color\n    const lastYear = node?.AMOUNT_LASTYEAR;\n    if (lastYear == null || lastYear === 0) {\n      return '#00ff00ff'; // Brightest green for new items\n    }\n    // Existing items use the growth-based color scale\n    return node?.GROWTH != null ? colorScale(node.GROWTH) : '#666666';\n  }, [colorScale]);\n\n  const nestedData = useMemo(() => {\n    console.log('filters', filters);\n\n    let out = nest();\n    // eslint-disable-next-line guard-for-in, no-restricted-syntax\n    for (const i in filters) {\n      // for (const i in hierarchyBy) {\n      // console.log(hierarchyBy[i], filters[i])\n      out = out.key((d) => d[hierarchyBy[i]]);\n    }\n\n    const nested = out\n      .rollup((leaves) => ({\n        value: d3.sum(leaves, (l) => l.AMOUNT),\n        AMOUNT_LASTYEAR: d3.sum(leaves, (l) => l.AMOUNT_LASTYEAR),\n        GROWTH: d3.sum(leaves, (l) => l.AMOUNT_LASTYEAR) > 0\n          ? (d3.sum(leaves, (l) => l.AMOUNT) / d3.sum(leaves, (l) => l.AMOUNT_LASTYEAR)) - 1\n          : null,\n      }))\n      .entries(data);\n    let inData = {\n      key: 'root',\n      values: [{ key: 'all', values: nested }],\n    };\n\n    // eslint-disable-next-line guard-for-in, no-restricted-syntax\n    for (const i in filters) {\n      inData = inData?.values?.filter?.((d) => d.key === filters[i])[0];\n    }\n\n    console.log('indata', inData);\n\n    return inData;\n  }, [data, filters, hierarchyBy]);\n\n  const [growth, setGrowth] = useState(null);\n\n  useEffect(() => {\n    const s = nestedData.values.reduce((a, b) => {\n      const val = b.value?.value !== undefined ? b.value.value : (b.value || 0);\n      return a + val;\n    }, 0);\n    const lastYearSum = nestedData.values.reduce((a, b) => a + (b.value?.AMOUNT_LASTYEAR || 0), 0);\n    const g = lastYearSum > 0 ? (s / lastYearSum) - 1 : null;\n    console.log('sum', s, 'lastYear', lastYearSum, 'growth', g);\n    if (sum !== s) { setCurrentSum(s); }\n    setSum(s);\n    setGrowth(g);\n  }, [nestedData, setCurrentSum, sum]);\n\n  useEffect(() => {\n    if (!svgRef.current) return;\n\n    console.log('fullVal', fullValue);\n    console.log('nested', nestedData);\n    const svgHeight = svgRef.current.clientHeight;\n    console.log(svgHeight);\n\n    const root = d3.hierarchy(nestedData, (d) => d?.values)\n      .sum((d) => (d?.value?.value !== undefined ? d.value.value : (d?.value || 0)))\n      .sort((a, b) => {\n        const valA = a?.value?.value !== undefined ? a.value.value : (a?.value || 0);\n        const valB = b?.value?.value !== undefined ? b.value.value : (b?.value || 0);\n        return valB - valA;\n      })\n      // eslint-disable-next-line no-param-reassign\n      .each((d) => {\n        if (d.data.value) {\n          // eslint-disable-next-line no-param-reassign\n          d.AMOUNT_LASTYEAR = d.data.value.AMOUNT_LASTYEAR;\n          // eslint-disable-next-line no-param-reassign\n          d.GROWTH = d.data.value.GROWTH;\n        }\n      });\n\n    const newSum = nestedData.values.reduce((a, b) => {\n      const val = b.value?.value !== undefined ? b.value.value : (b.value || 0);\n      return a + val;\n    }, 0);\n\n    const newSumWin = [...sumWindows];\n    const idx0 = newSumWin.indexOf(sum);\n    if (idx0 !== -1) {\n      newSumWin[idx0] = newSum;\n    }\n    const fullVal = d3.max(newSumWin);\n    const treeFullArea = (width - 2 * padding) * (svgHeight - 2 * padding);\n    const treeAspect = (width - 2 * padding) / (svgHeight - 2 * padding);\n    const treeCurrentArea = (newSum / (fullVal || 1)) * treeFullArea;\n    console.log('sumw', index, sumWindows, newSumWin, sum, fullVal, newSum);\n    const treeH = fullVal <= 0 ? svgHeight - 2 * padding : Math.sqrt(treeCurrentArea / treeAspect);\n    const treeW = fullVal <= 0 ? width - 2 * padding : treeCurrentArea / treeH;\n\n    const treemap = d3.treemap()\n      .size([treeW, treeH])\n      .padding(0);\n    // .round(true);\n\n    const nodes = treemap(root);\n\n    const svg = d3.select(svgRef.current).select('g.chart');\n\n    const barScale = d3.scaleLinear()\n      .domain([0, d3.max(root.leaves(), (d) => d.value)])\n      .range([0, width - 2 * padding]);\n\n    const treemapPieceGroup = svg\n      .selectAll('g.treemap-piece')\n      .data(root.leaves(), (d) => d?.data?.key);\n\n    const treemapPieceGroupEnter = treemapPieceGroup\n      .enter()\n      .append('g')\n      .attr('class', 'treemap-piece')\n      .attr('id', (d) => `${d?.data?.key.replaceAll(/[ ()]/g, '')}-${index}`)\n      .style('mask', (d) => `url(#mask-${d?.data?.key.replaceAll(/[ ()]/g, '')}-${index})`)\n      .attr('data-tip', (d) => {\n        const itemGrowth = d?.GROWTH;\n        const lastYear = d?.AMOUNT_LASTYEAR;\n        const growthText = itemGrowth != null ? `${(itemGrowth * 100).toFixed(1)}%` : 'N/A';\n        const lastYearText = lastYear != null ? lastYear.toLocaleString() : 'N/A';\n        return `${d?.data?.key}<br>${d?.value?.toLocaleString?.()} บาท<br>ปีที่แล้ว: ${lastYearText} บาท<br>เติบโต: ${growthText}`;\n      })\n      .attr('transform', (d) => `translate(${d.x0 || 0},${d.y0 || 0})`);\n    // .attr('opacity', 0);\n\n    treemapPieceGroupEnter\n      .append('rect')\n      .attr('class', 'box')\n      .attr('rx', 3)\n      .style('fill', (d) => getNodeColor(d))\n      .attr('width', (d) => (d.x1 - d.x0) || 0)\n      .attr('height', (d) => (d.y1 - d.y0) || 0);\n    // .attr('x', d => d.x0)\n    // .attr('y', d => d.y0)\n    // .style('stroke', 'black')\n\n    // .style('fill', 'cyan');\n\n    treemapPieceGroupEnter\n      .append('mask')\n      .attr('id', (d) => `mask-${d?.data?.key.replaceAll(/[ ()]/g, '')}-${index}`)\n      .append('rect')\n      .attr('class', 'mask')\n      .attr('rx', 3)\n      .style('fill', 'white')\n      .attr('width', (d) => (d.x1 - d.x0) || 0)\n      .attr('height', (d) => (d.y1 - d.y0) || 0);\n\n    treemapPieceGroupEnter\n      .append('text')\n      .attr('class', 'text-name')\n      .attr('font-size', '12px')\n      .attr('fill', 'white');\n\n    treemapPieceGroupEnter\n      .append('text')\n      .attr('class', 'text-value')\n      .attr('font-size', '12px')\n      .attr('fill', 'white');\n\n    treemapPieceGroupEnter\n      .append('text')\n      .attr('class', 'text-growth')\n      .attr('font-size', '12px')\n      .attr('fill', 'white');\n\n    const treemapPieceMerged = treemapPieceGroupEnter.merge(treemapPieceGroup);\n\n    treemapPieceMerged\n      .on('click', null)\n      .on('click', (e, d, el) => {\n        const newFilters = [...filters, d?.data?.key];\n        if (newFilters.length > hierarchyBy.length) return;\n\n        // const treeFullArea = (width - 2 * padding) * (svgHeight - 2 * padding);\n        // const treeAspect = (width - 2 * padding) / (svgHeight - 2 * padding);\n        // const treeCurrentArea = (sum / (fullValue || 1)) * treeFullArea;\n        const newSumWindows = [...sumWindows];\n        const idx = newSumWindows.indexOf(sum);\n        if (idx !== -1) {\n          newSumWindows[idx] = d.value;\n        }\n        const newFullValue = d3.max(newSumWindows);\n\n        // const newFullValue = sum === fullValue && !isMultipleMaxSum ? d.value : fullValue;\n        // const newArea = (d.value / (fullValue || 1)) * treeFullArea;\n        const newArea = (d.value / (newFullValue || 1)) * treeFullArea;\n        const newH = Math.sqrt(newArea / treeAspect);\n        const newW = newArea / newH;\n\n        const dx = d.x0;\n        const dy = d.y0;\n        const sx = newW / (d.x1 - d.x0);\n        const sy = newH / (d.y1 - d.y0);\n\n        console.log('prp', d3.select(this), e, d, el);\n        // const sx = 0.43;\n        // const sy = 1.05;\n\n        d3.select(this).classed('selected', true);\n\n        treemapPieceMerged\n          .transition()\n          .duration(300)\n          .attr('transform', (p) => `translate(${(p.x0 - dx) * sx},${(p.y0 - dy) * sy})`);\n\n        treemapPieceMerged.select('rect.box')\n          .transition()\n          .duration(300)\n          .attr('width', (p) => Math.max(sx * (p.x1 - p.x0), 0))\n          .attr('height', (p) => Math.max(sy * (p.y1 - p.y0), 0));\n\n        treemapPieceMerged.select('rect.mask')\n          .transition()\n          .duration(300)\n          .attr('width', (p) => Math.max(sx * (p.x1 - p.x0), 0))\n          .attr('height', (p) => Math.max(sy * (p.y1 - p.y0), 0));\n\n        setTimeout(() => {\n          setFilters(newFilters);\n          // history.push(`/${newFilters.join('/')}`);\n        }, 300);\n      })\n      .transition()\n      .duration(300)\n      .attr('transform', (d) => `translate(${d.x0},${d.y0})`)\n      .attr('opacity', 1)\n      .attr('data-tip', (d) => {\n        const nodeGrowth = d?.GROWTH;\n        const lastYear = d?.AMOUNT_LASTYEAR;\n        const growthText = nodeGrowth != null ? `${(nodeGrowth * 100).toFixed(1)}%` : 'N/A';\n        const lastYearText = lastYear != null ? lastYear.toLocaleString() : 'N/A';\n        return `${d?.data?.key}<br>${d?.value?.toLocaleString?.()} บาท<br>ปีที่แล้ว: ${lastYearText} บาท<br>เติบโต: ${growthText}`;\n      });\n\n    treemapPieceMerged.select('rect.box')\n      .transition()\n      .duration(300)\n      .attr('rx', 3)\n      .style('fill', (d) => getNodeColor(d))\n      .attr('stroke', 'black')\n      .attr('stroke-width', gutter)\n      .attr('width', (d) => Math.max((d.x1 - d.x0) || 0, 0))\n      .attr('height', (d) => Math.max((d.y1 - d.y0) || 0, 0));\n\n    treemapPieceMerged.select('rect.mask')\n      .transition()\n      .duration(300)\n      .attr('rx', 3)\n      .style('fill', 'white')\n      .attr('width', (d) => Math.max((d.x1 - d.x0) || 0, 0))\n      .attr('height', (d) => Math.max((d.y1 - d.y0) || 0, 0));\n\n    treemapPieceMerged.select('text.text-name')\n      .attr('x', 5)\n      .attr('y', 8)\n      .attr('dominant-baseline', 'hanging')\n      .text((d) => d?.data?.key);\n\n    treemapPieceMerged.select('text.text-value')\n      .attr('x', 5)\n      .attr('y', 24)\n      .attr('fill-opacity', 0.7)\n      .attr('dominant-baseline', 'hanging')\n      .attr('opacity', 1)\n      .text((d) => `${d.value.toLocaleString()} บาท`);\n\n    treemapPieceMerged.select('text.text-growth')\n      .attr('x', 5)\n      .attr('y', 40)\n      .attr('fill-opacity', 0.7)\n      .attr('dominant-baseline', 'hanging')\n      .attr('opacity', 1)\n      .text((d) => {\n        const itemGrowth = d?.GROWTH;\n        return itemGrowth != null ? `${itemGrowth >= 0 ? 'เพิ่มขึ้น' : 'ลดลง'} ${(itemGrowth * 100).toFixed(1)}%` : '';\n      })\n      .attr('fill', (d) => (d?.GROWTH > 0 ? '#4f4' : d?.GROWTH < 0 ? '#f44' : 'white'));\n\n    treemapPieceGroup.exit()\n      .transition()\n      .delay(150)\n      .duration(600)\n      .attr('opacity', 0)\n      // .delay(300)\n      .remove();\n\n    ReactTooltip.rebuild();\n    console.log('rebuilding tooltip');\n\n    console.log('too small', root.leaves().filter((d) => (d.x1 - d.x0) * (d.y1 - d.y0) < 100));\n    console.log('too narrow', root.leaves().filter((d) => d.x1 - d.x0 < 20));\n    console.log('too short', root.leaves().filter((d) => d.y1 - d.y0 < 20));\n  }, [\n    svgRef,\n    nestedData,\n    filters,\n    width,\n    height,\n    displayMode,\n    padding,\n    gutter,\n    hierarchyBy,\n    setFilters,\n    fullValue,\n    sum,\n    index,\n    isMultipleMaxSum,\n    sumWindows,\n    colorScale,\n    getNodeColor,\n  ]);\n\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        display: 'flex',\n        flexDirection: 'column',\n        overflowY: 'auto',\n      }}\n    >\n      <div\n        style={{\n          paddingLeft: 18,\n          fontSize: 12,\n          marginBottom: -padding + 4,\n          zIndex: 2,\n        }}\n      >\n        <b style={{ whiteSpace: 'nowrap' }}>\n          {filters[filters.length - 1] === 'all' ? 'รวมทุกหน่วยงาน' : filters[filters.length - 1]}\n        </b>\n        <br />\n        <span style={{ opacity: 0.7 }}>\n          {sum.toLocaleString()}\n          {' '}\n          บาท\n          {growth != null && (\n            <span\n              style={{\n                color: growth > 0 ? '#4f4' : growth < 0 ? '#f44' : 'inherit',\n                marginLeft: '8px',\n              }}\n            >\n              {'('}\n              {(growth * 100).toFixed(1)}\n              {'%)'}\n            </span>\n          )}\n        </span>\n      </div>\n      {isLoading\n        && (\n          <FullView\n            style={{\n              backgroundColor: '#000c',\n              alignItems: 'center',\n              justifyContent: 'center',\n            }}\n          >\n            Loading...\n          </FullView>\n        )}\n\n      <div\n        style={{\n          height: padding,\n          marginBottom: -padding,\n          background: 'linear-gradient(#000f, #0000)',\n          width: '100%',\n          zIndex: 1,\n          pointerEvents: 'none',\n        }}\n      />\n      <div style={{ flexGrow: 1, position: 'relative' }}>\n        <div\n          style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            display: 'flex',\n            flexDirection: 'column',\n            overflowY: 'auto',\n          }}\n          ref={observe}\n        >\n          <svg ref={svgRef} width={width} height={height}>\n            <g transform={`translate(${padding}, ${padding})`} className=\"chart\" />\n          </svg>\n        </div>\n      </div>\n      <div\n        style={{\n          height: padding,\n          marginTop: -padding,\n          background: 'linear-gradient(#0000, #000f)',\n          width: '100%',\n          zIndex: 1,\n          pointerEvents: 'none',\n        }}\n      />\n    </div>\n  );\n}\n\nexport default Treemap;\n","import React, { useMemo } from 'react';\nimport * as d3 from 'd3';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n  // background: #1a1a1a;\n  color: white;\n  font-size: 12px;\n  overflow-y: auto;\n`;\n\nconst Title = styled.h3`\n  margin: 0 0 12px 0;\n  font-size: 14px;\n  opacity: 0.8;\n  word-break: break-word;\n`;\n\nconst ChartContainer = styled.div`\n  display: flex;\n  align-items: flex-end;\n  gap: 4px;\n  height: 180px;\n  margin-bottom: 20px;\n`;\n\nconst BarSlot = styled.div`\n  height: 140px;\n  width: 100%;\n  display: flex;\n  align-items: flex-end;\n`;\n\nconst Bar = styled.div`\n  flex: 1;\n  background: linear-gradient(to top, #00ac00, #00ac00);\n  border-radius: 2px 2px 0 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-end;\n  padding: 4px 0;\n  cursor: pointer;\n  transition: opacity 0.2s;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst BarLabel = styled.div`\n  font-size: 10px;\n  margin-top: 4px;\n  text-align: center;\n`;\n\nconst BarValue = styled.div`\n  font-size: 9px;\n  opacity: 0.7;\n  color: white;\n`;\n\nfunction YearComparison({ data, filters, hierarchyBy }) {\n  // Generate a title based on the focused scope\n  const scopeTitle = useMemo(() => {\n    if (!filters || filters.length === 0) return 'ข้อมูลรายปี';\n    if (filters.length === 1 && filters[0] === 'all') return 'งบประมาณทั้งหมด';\n    // Return the last active filter value (the focused item)\n    return filters[filters.length - 1];\n  }, [filters]);\n\n  const yearData = useMemo(() => {\n    if (!data || data.length === 0 || !filters || filters.length === 0) {\n      return [];\n    }\n\n    // Build the filtering logic based on current filters\n    let filtered = data;\n    const activeFilters = filters[0] === 'all' ? filters.slice(1) : filters;\n\n    // Apply all active filters (if any)\n    for (let i = 0; i < activeFilters.length; i++) {\n      const filterLevel = hierarchyBy[i];\n      const filterValue = activeFilters[i];\n      filtered = filtered.filter((d) => d[filterLevel] === filterValue);\n    }\n\n    // Group by fiscal year and sum amounts\n    const years = {};\n\n    filtered.forEach((d) => {\n      // For year 2026 (69)\n      const amount69 = parseFloat(d.AMOUNT_69?.replace(/,/g, '') || '0') || 0;\n      if (!years['2026']) years['2026'] = 0;\n      years['2026'] += amount69;\n\n      // For year 2025 (68)\n      const amount68 = parseFloat(d.AMOUNT_68?.replace(/,/g, '') || '0') || 0;\n      if (!years['2025']) years['2025'] = 0;\n      years['2025'] += amount68;\n    });\n\n    return Object.entries(years)\n      .map(([year, amount]) => ({ year, amount }))\n      .sort((a, b) => parseInt(a.year, 10) - parseInt(b.year, 10));\n  }, [data, filters, hierarchyBy]);\n\n  const maxAmount = useMemo(\n    () => d3.max(yearData, (d) => d.amount) || 1,\n    [yearData],\n  );\n\n  if (yearData.length === 0) {\n    return (\n      <Container>\n        <Title>ข้อมูลรายปี</Title>\n        <div style={{ opacity: 0.5 }}>ไม่มีข้อมูล</div>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <Title title={scopeTitle}>\n        {scopeTitle.length > 30 ? `${scopeTitle.substring(0, 27)}...` : scopeTitle}\n      </Title>\n      <ChartContainer>\n        {yearData.map((d) => (\n          <div\n            key={d.year}\n            style={{\n              flex: 1,\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n            }}\n          >\n            <BarSlot>\n              <Bar\n                style={{ height: `${(d.amount / maxAmount) * 100}%`, minHeight: '6px' }}\n                title={`${d.year}: ${d.amount.toLocaleString()}`}\n              >\n                <BarValue>{d.amount > 0 ? `${(d.amount / 1e9).toFixed(1)}B` : '0'}</BarValue>\n              </Bar>\n            </BarSlot>\n            <BarLabel>{d.year}</BarLabel>\n          </div>\n        ))}\n      </ChartContainer>\n      <div style={{ fontSize: 11, opacity: 0.6 }}>\n        {yearData.map((d) => (\n          <div key={d.year}>\n            {d.year}\n            {': '}\n            {d.amount.toLocaleString()}\n            {' '}\n            บาท\n          </div>\n        ))}\n      </div>\n    </Container>\n  );\n}\n\nexport default YearComparison;\n","import React, { useMemo } from 'react';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 16px;\n  // background: #1a1a1a;\n  color: white;\n  font-size: 11px;\n  overflow-y: auto;\n  flex-grow: 1;\n`;\n\nconst Title = styled.h3`\n  margin: 0 0 12px 0;\n  font-size: 14px;\n  opacity: 0.8;\n  word-break: break-word;\n`;\n\nconst ListItem = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding: 6px 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  align-items: center;\n\n  &:last-child {\n    border-bottom: none;\n  }\n`;\n\nconst Name = styled.span`\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-right: 8px;\n`;\n\nconst PercentChange = styled.span`\n  font-weight: bold;\n  white-space: nowrap;\n  color: ${(props) => {\n    if (props.growth > 0.05) return '#00ac00'; // Significant increase - green\n    if (props.growth > 0) return '#88dd88'; // Small increase - light green\n    if (props.growth > -0.05) return '#ff9999'; // Small decrease - light red\n    return '#cc0000'; // Significant decrease - red\n  }};\n`;\n\nfunction PercentageChangeList({ data, filters, hierarchyBy }) {\n  // Generate a title based on the focused scope\n  const scopeTitle = useMemo(() => {\n    if (!filters || filters.length === 0) return '% เปลี่ยนแปลง';\n    if (filters.length === 1 && filters[0] === 'all') return '% เปลี่ยนแปลงรายหน่วยงาน';\n    // Return the last active filter value (the focused item)\n    return `% เปลี่ยนแปลง: ${filters[filters.length - 1]}`;\n  }, [filters]);\n\n  const changeData = useMemo(() => {\n    if (!data || data.length === 0 || !filters || filters.length === 0) {\n      return [];\n    }\n\n    const activeFilters = filters[0] === 'all' ? filters.slice(1) : filters;\n\n    // Determine the next hierarchy level to compare items at\n    const levelToCompare = Math.min(activeFilters.length, hierarchyBy.length - 1);\n    const compareField = hierarchyBy[levelToCompare];\n\n    // Filter data: apply all current active filters\n    let filtered = data;\n    for (let i = 0; i < activeFilters.length; i++) {\n      const filterLevel = hierarchyBy[i];\n      const filterValue = activeFilters[i];\n      filtered = filtered.filter((d) => d[filterLevel] === filterValue);\n    }\n\n    // Group by the compare field and calculate totals for each year\n    const groups = new Map();\n\n    // If we're at root, we're comparing by the first level (ministries)\n    // Otherwise, we're comparing by the next level's children\n    filtered.forEach((d) => {\n      const groupKey = d[compareField];\n      const amount69 = parseFloat(d.AMOUNT_69?.replace(/,/g, '') || '0') || 0;\n      const amount68 = parseFloat(d.AMOUNT_68?.replace(/,/g, '') || '0') || 0;\n\n      if (!groups.has(groupKey)) {\n        groups.set(groupKey, { amount69: 0, amount68: 0 });\n      }\n      const group = groups.get(groupKey);\n      group.amount69 += amount69;\n      group.amount68 += amount68;\n    });\n\n    // Calculate % changes\n    const changes = Array.from(groups.entries())\n      .map(([name, { amount69, amount68 }]) => {\n        const isNew = amount68 === 0;\n        const growth = amount68 > 0 ? (amount69 - amount68) / amount68 : (amount69 > 0 ? 1 : 0);\n        return {\n          name,\n          growth,\n          isNew,\n          amount68,\n          amount69,\n          diff: amount69 - amount68,\n        };\n      })\n      .sort((a, b) => {\n        // New items first, then by growth\n        if (a.isNew && !b.isNew) return -1;\n        if (!a.isNew && b.isNew) return 1;\n        return b.growth - a.growth;\n      });\n\n    return changes;\n  }, [data, filters, hierarchyBy]);\n\n  if (changeData.length === 0) {\n    return (\n      <Container>\n        <Title>% เปลี่ยนแปลง</Title>\n        <div style={{ opacity: 0.5 }}>ไม่มีข้อมูล</div>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <Title title={scopeTitle}>\n        {scopeTitle.length > 30 ? `${scopeTitle.substring(0, 27)}...` : scopeTitle}\n      </Title>\n      <div style={{ maxHeight: '360px', overflowY: 'auto' }}>\n        {changeData.map((item) => (\n          <ListItem key={item.name}>\n            <Name title={item.name}>{item.name.length > 25 ? `${item.name.substring(0, 22)}...` : item.name}</Name>\n            <PercentChange growth={item.growth}>\n              {item.isNew ? 'รายการใหม่' : `${(item.growth * 100).toFixed(1)}%`}\n            </PercentChange>\n          </ListItem>\n        ))}\n      </div>\n      <div\n        style={{\n          marginTop: 12,\n          fontSize: 10,\n          opacity: 0.5,\n          fontStyle: 'italic',\n        }}\n      >\n        หมายเหตุ: % เปลี่ยนแปลงจาก 2025 ถึง 2026\n      </div>\n    </Container>\n  );\n}\n\nexport default PercentageChangeList;\n","import React, {\n  useCallback, useEffect, useMemo, useState,\n} from 'react';\nimport * as d3 from 'd3';\nimport styled from 'styled-components';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport ReactTooltip from 'react-tooltip';\nimport Treemap from './Treemap';\nimport YearComparison from './YearComparison';\nimport PercentageChangeList from './PercentageChangeList';\nimport FullView from './FullView';\n\nconst TOP_BAR_HEIGHT = 60;\n\nconst RightSidebar = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 280px;\n  border-left: 1px solid rgba(255, 255, 255, 0.1);\n  overflow: hidden;\n\n  @media screen and (orientation: portrait) {\n    display: none;\n  }\n`;\n\nconst ResponsiveImage = styled.img`\n  width: 100%;\n`;\n\nconst CreditLink = styled.a`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-decoration: none;\n  color: white;\n  text-align: center;\n  margin-left: 16px;\n  height: 32px;\n  opacity: 0.4;\n\n  &:hover {\n    opacity: 1;\n  }\n\n  small {\n    margin-bottom: 4px;\n    opacity: 0.4;\n  }\n\n  ${ResponsiveImage} {\n    max-width: 64px;\n  }\n`;\n\nconst hierarchyBy = [\n  'MINISTRY',\n  'BUDGETARY_UNIT',\n  'BUDGET_PLAN',\n  // 'OUPUT',\n  // 'PROJECT',\n  'OUTPUT_PROJECT',\n  // 'CATEGORY_LV1',\n  'ITEM',\n  // 'CATEGORY_LV2',\n  // 'CATEGORY_LV3',\n  // 'CATEGORY_LV4',\n  // 'CATEGORY_LV5',\n  // 'CATEGORY_LV6',\n  // 'ITEM_DESCRIPTION',\n];\n\nconst THAI_NAME = {\n  MINISTRY: 'กระทรวงหรือเทียบเท่า',\n  BUDGETARY_UNIT: 'หน่วยรับงบฯ',\n  BUDGET_PLAN: 'แผนงาน',\n  OUTPUT_PROJECT: 'ผลผลิต/โครงการ',\n  ITEM: 'รายการ',\n};\n\nfunction DataView({\n  data,\n  isLoading,\n  setCurrentSum = (sum) => { },\n  fullValue = -1,\n  index = 0,\n  isMultipleMaxSum = false,\n  sumWindows = [],\n}) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filters, setFilters] = useState(['all']);\n\n  const filterDataByQuery = useCallback((datum, query) => {\n    const searchLevels = [\n      'MINISTRY',\n      'BUDGETARY_UNIT',\n    ];\n    // eslint-disable-next-line guard-for-in, no-restricted-syntax\n    for (const i in searchLevels) {\n      if (datum[searchLevels[i]].includes(query)) { return true; }\n    }\n    return false;\n  }, []);\n\n  const filteredData = useMemo(\n    () => data.filter((d) => filterDataByQuery(d, searchQuery)),\n    [data, filterDataByQuery, searchQuery],\n  );\n\n  const location = useLocation();\n  const history = useHistory();\n\n  useEffect(() => {\n    const f = location.pathname.split('/').slice(1);\n    console.log('f', f, f.length > 0 && f[0] ? f : ['all']);\n    setFilters(f.length > 0 && f[0] ? f : ['all']);\n  }, [location]);\n\n  const navigateTo = (x, i) => {\n    console.log(x, i);\n    const temp = [...filters];\n    temp.splice(i + 1);\n    // setFilters(temp);\n    console.log('temp', temp);\n    setFilters(temp);\n    // history.push(`/${temp.join('/')}`);\n  };\n\n  return (\n    <FullView>\n      {/*\n      <button type=\"button\" onClick={() => setCompareView(!isCompareView)}>\n      toggle compare view\n      </button>\n       */}\n      <div\n        style={{\n          height: TOP_BAR_HEIGHT,\n          display: 'flex',\n          alignItems: 'center',\n          paddingLeft: 16,\n          paddingRight: 16,\n          marginBottom: 8,\n        }}\n      >\n        <div\n          style={{\n            flexGrow: 1,\n            display: 'flex',\n            alignItems: 'center',\n            overflowX: 'auto',\n          }}\n        >\n          {/* <button type=\"button\" onClick={() => setDisplayMode('treemap')}>treemap</button>\n        <button type=\"button\" onClick={() => setDisplayMode('bar')}>bar</button> */}\n\n          {filters.map((x, i) => (\n            <>\n              <button\n                type=\"button\"\n                onClick={() => navigateTo(x, i)}\n                style={{\n                  marginRight: 8,\n                  backgroundColor: 'transparent',\n                  border: 'none',\n                  color: 'white',\n                  padding: 0,\n                  textAlign: 'left',\n                }}\n              >\n                <small style={{ opacity: '0.4', whiteSpace: 'nowrap' }}>{i > 0 && THAI_NAME[hierarchyBy[i - 1]]}</small>\n                {i > 0 && <br />}\n                <span style={{ textDecoration: i < filters.length - 1 ? 'underline' : 'none', whiteSpace: 'nowrap' }}>\n                  {i === 0\n                    ? (\n                      searchQuery === ''\n                        ? 'หน่วยงานทั้งหมด'\n                        : `หน่วยงานทั้งหมดที่ชื่อมีคำว่า \"${searchQuery}\"`\n                    )\n                    : x.length < 20 ? x : `${x.substr(0, 20)}...`}\n                </span>\n              </button>\n              {i === filters.length - 1\n                && (\n                  <>\n                    <small style={{ color: 'white', marginRight: 8, opacity: '0.4' }}>\n                      :\n                    </small>\n                    <small style={{ color: 'white', marginRight: 8, opacity: '0.4' }}>\n                      แบ่งตาม\n                      {' '}\n                      {THAI_NAME[hierarchyBy[i]]}\n                    </small>\n                  </>\n                )}\n              {i < filters.length - 1\n                && <span style={{ color: 'white', marginRight: 8 }}>&gt;</span>}\n            </>\n          ))}\n          {/* {JSON.stringify(filters)} */}\n        </div>\n        <div>\n          <label style={{ fontSize: 12, opacity: 0.7 }}>Filter</label>\n          <br />\n          <input\n            type=\"text\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            placeholder=\"หน่วยรับงบหรือกระทรวง\"\n          />\n        </div>\n        <CreditLink target=\"_blank\" href=\"https://taepras.com\">\n          {/* <small>Visualized by</small> */}\n          <ResponsiveImage\n            src={`${process.env.PUBLIC_URL}/tp_logo_dark.svg`}\n            alt=\"Thanawit Prasongpongchai taepras.com\"\n            title=\"Thanawit Prasongpongchai\"\n          />\n        </CreditLink>\n      </div>\n      <div style={{ display: 'flex', flexDirection: 'row', flexGrow: 1 }}>\n        <div style={{\n          position: 'relative',\n          flexGrow: 1,\n        }}\n        >\n          <Treemap\n            data={filteredData}\n            isLoading={isLoading}\n            filters={filters}\n            hierarchyBy={hierarchyBy}\n            setFilters={setFilters}\n            setCurrentSum={(x) => {\n              // console.log('!!setting sum', x, setCurrentSum);\n              setCurrentSum(x);\n            }}\n            fullValue={fullValue}\n            index={index}\n            isMultipleMaxSum={isMultipleMaxSum}\n            sumWindows={sumWindows}\n          />\n        </div>\n        <RightSidebar>\n          <YearComparison data={filteredData} filters={filters} hierarchyBy={hierarchyBy} />\n          <PercentageChangeList data={filteredData} filters={filters} hierarchyBy={hierarchyBy} />\n        </RightSidebar>\n      </div>\n    </FullView>\n  );\n}\n\nexport default DataView;\n","import React, {\n  useCallback, useEffect, useMemo, useState,\n} from 'react';\nimport * as d3 from 'd3';\nimport styled from 'styled-components';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport ReactTooltip from 'react-tooltip';\nimport logo from './logo.svg';\nimport './App.css';\nimport DataView from './components/DataView';\nimport FullView from './components/FullView';\n\nconst PageContainer = styled.div`\n display: flex;\n flex-direction: row;\n flex-grow: 1;\n\n  @media screen and (orientation:portrait) {\n    flex-direction: column;\n  }\n`;\n\nconst ResponsiveImage = styled.img`\n  width: 100%;\n`;\n\nconst CreditLink = styled.a`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-decoration: none;\n  color: white;\n  text-align: center;\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  small {\n    margin-bottom: 4px;\n    opacity: 0.4;\n  }\n\n  ${ResponsiveImage} {\n    max-width: 64px;\n  }\n`;\n\nconst Sidebar = styled.div`\n  position: relative;\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  \n  @media screen and (orientation:landscape) {\n    width: 80px;\n    &>*:not(:last-child) {\n      margin-bottom: 16px;\n    }\n  }\n\n  @media screen and (orientation:portrait) {\n    height: 64px;\n    flex-direction: row;\n    /* display: none !important; */\n\n    &>*:not(:last-child) {\n      margin-right: 16px;\n    }\n\n    ${CreditLink} ${ResponsiveImage} {\n      max-width: 48px;\n    }\n  }\n`;\n\nconst ActionButton = styled.button`\n  padding: 8px;\n  background-color: #181818;\n  border: none;\n  color: #888;\n  border-radius: 8px;\n  display: inline-flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n\nfunction App() {\n  const [data, setData] = useState([]);\n  const [isLoading, setLoading] = useState(true);\n  const [isCompareView, setCompareView] = useState(false);\n  const [filters, setFilters] = useState(['all']);\n  const [sumWindows, setSumWindows] = useState([0, 0]);\n\n  useEffect(() => {\n    d3.csv(`${process.env.PUBLIC_URL}/data-69-with-68.csv`).then((d) => {\n    // d3.csv(`${process.env.PUBLIC_URL}/data-69.csv`).then((d) => {\n    // d3.csv(`${process.env.PUBLIC_URL}/data-68.csv`).then((d) => {\n      setData(d);\n      setLoading(false);\n    });\n  }, []);\n\n  const setSumWindowsIdx = (i, value) => {\n    const temp = [...sumWindows];\n    temp[i] = value;\n    setSumWindows(temp);\n  };\n\n  const maxSumValue = useMemo(() => d3.max(sumWindows), [sumWindows]);\n\n  const isMultipleMaxSum = useMemo(() => {\n    const mx = d3.max(sumWindows);\n    return sumWindows.filter((x) => mx === x).length > 1;\n  }, [sumWindows]);\n\n  const preprocessedData = useMemo(() => data\n    .map((d) => {\n      const amountThisYear = parseFloat(d.AMOUNT_69.replace(/,/g, '')) || 0;\n      const amountLastYear = parseFloat(d.AMOUNT_68.replace(/,/g, '')) || 0;\n      // const amountLastYear = 0;\n      return {\n        ...d,\n        AMOUNT: amountThisYear,\n        AMOUNT_LASTYEAR: amountLastYear,\n        DIFF: amountThisYear - amountLastYear,\n        GROWTH: amountLastYear > 0 ? (amountThisYear - amountLastYear) / amountLastYear : Infinity,\n        OUTPUT_PROJECT: (d.OUTPUT || d.PROJECT) ? (d.OUTPUT + d.PROJECT) : 'ไม่ระบุโครงการ/ผลผลิต',\n        MINISTRY: d.MINISTRY.replace(/\\([0-9]+\\)$/, '').trim(),\n        ITEM: [\n          d.ITEM_DESCRIPTION,\n          d.CATEGORY_LV2,\n          d.CATEGORY_LV3,\n          d.CATEGORY_LV4,\n          d.CATEGORY_LV5,\n          d.CATEGORY_LV6,\n        ]\n          .filter((x) => x)\n          .join(' - '),\n      };\n    }), [data]);\n\n  const location = useLocation();\n  const history = useHistory();\n\n  useEffect(() => {\n    const f = location.pathname.split('/').slice(1);\n    console.log('f', f, f.length > 0 && f[0] ? f : ['all']);\n    setFilters(f.length > 0 && f[0] ? f : ['all']);\n  }, [location]);\n\n  const navigateTo = (x, i) => {\n    console.log(x, i);\n    const temp = [...filters];\n    temp.splice(i + 1);\n    // setFilters(temp);\n    console.log('temp', temp);\n    history.push(`/${temp.join('/')}`);\n  };\n\n  return (\n    <FullView>\n      <PageContainer>\n        <div style={{\n          position: 'relative',\n          flexGrow: 1,\n        }}\n        >\n          <DataView\n            data={preprocessedData}\n            isLoading={isLoading}\n            fullValue={maxSumValue}\n            setCurrentSum={(s) => {\n              console.log('setCurrentSum 0', s);\n              setSumWindowsIdx(0, s);\n            }}\n            isMultipleMaxSum={isMultipleMaxSum}\n            sumWindows={sumWindows}\n            index={0}\n          />\n        </div>\n        {isCompareView && (\n          <div style={{\n            position: 'relative',\n            flexGrow: 1,\n          }}\n          >\n            <DataView\n              data={preprocessedData}\n              isLoading={isLoading}\n              fullValue={maxSumValue}\n              setCurrentSum={(s) => {\n                console.log('setCurrentSum 1', s);\n                setSumWindowsIdx(1, s);\n              }}\n              isMultipleMaxSum={isMultipleMaxSum}\n              sumWindows={sumWindows}\n              index={1}\n            />\n          </div>\n        )}\n        {/* <Sidebar>\n          <ActionButton\n            type=\"button\"\n            onClick={() => {\n              if (isCompareView) { setSumWindowsIdx(1, 0); }\n              setCompareView(!isCompareView);\n            }}\n          >\n            <span style={{\n              display: 'inline-flex',\n              fontSize: 24,\n              width: 32,\n              height: 32,\n              borderRadius: '50%',\n              backgroundColor: '#333',\n              color: 'white',\n              alignItems: 'center',\n              justifyContent: 'center',\n              marginBottom: 8,\n            }}\n            >\n              {!isCompareView ? '+' : '×'}\n            </span>\n            {!isCompareView ? 'Open\\nCompare\\nView' : 'Close\\nCompare\\nView'}\n          </ActionButton>\n          <div style={{ flexGrow: 1 }} />\n\n          <CreditLink target=\"_blank\" href=\"https://taepras.com\">\n            <small>Visualized by</small>\n            <ResponsiveImage\n              src={`${process.env.PUBLIC_URL}/tp_logo_dark.svg`}\n              alt=\"Thanawit Prasongpongchai taepras.com\"\n              title=\"Thanawit Prasongpongchai\"\n            />\n          </CreditLink>\n          <CreditLink target=\"_blank\" href=\"https://docs.google.com/spreadsheets/d/1yyWXSTbq3CD_gNxks-krcSBzbszv3c_2Nq54lckoQ24/edit#gid=343539850\">\n            <small>Data Source</small>\n            <ResponsiveImage\n              src={`${process.env.PUBLIC_URL}/kaogeek_logo_dark.png`}\n              alt=\"kaogeek logo\"\n              title=\"กลุ่มก้าว Geek\"\n            />\n            <ResponsiveImage\n              src={`${process.env.PUBLIC_URL}/wevis_logo_dark.png`}\n              alt=\"WeVis logo\"\n              title=\"WeVis\"\n            />\n          </CreditLink>\n          <div style={{ opacity: 0.6, textAlign: 'center' }}>\n            <small style={{ display: 'inline-block', lineHeight: 1.2 }}>\n              ** This is a work-in-progress.\n            </small>\n          </div>\n        </Sidebar> */}\n      </PageContainer>\n      {/* <div\n        style={{\n          padding: 16,\n          paddingTop: 8,\n          fontSize: 12,\n          opacity: '0.7',\n          display: 'flex',\n        }}\n      >\n\n      </div> */}\n      <ReactTooltip multiline />\n    </FullView>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {\n  HashRouter as Router,\n  Switch,\n  useLocation,\n} from 'react-router-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  // eslint-disable-next-line no-undef\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}